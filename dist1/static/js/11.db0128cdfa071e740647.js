webpackJsonp([11],{"9z+l":function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("bOdI"),l=e.n(i),o=e("mvHQ"),a=e.n(o),r={data:function(){return{hasRes:!0,pageError:"暂无查询数据~",list:[],searchKey:"",searchSort:"desc",colorStatus:"",size:"",pageno:1}},mounted:function(){this.size=this.$store.state.addStore.size.id},methods:{firstGet_color:function(s){this.colorStatus=s,this.pageno=1,this.list=[],this.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.reInit"),this.getList()},firstGet_size:function(s){this.size=s,this.pageno=1,this.list=[],this.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.reInit"),this.getList(),console.log(s)},firstGet_search:function(s){this.searchKey=s,this.pageno=1,this.list=[],this.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.reInit"),this.getList()},firstGet_sort:function(s){this.searchSort=s,this.pageno=1,this.list=[],this.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.reInit"),this.getList()},getList:function(){var s=this;console.log(s.$store.state.addStore.size.id);var t=new D.FYBusiness("PRODUCTIONSUMMARYLISTQRY"),e=t.addCreateService("PRODUCTIONSUMMARYLISTQRY",!1),i=e.addCreateData();i.setValue("AS_USER_ID",localStorage.loginname),i.setValue("AS_DEPT_ID",""),i.setValue("AS_FUNC_NAME","PRODUCTIONSUMMARYLISTQRY"),i.setValue("AS_CONDITION",s.searchKey),i.setValue("AS_STATUS",s.colorStatus),i.setValue("AS_SIZEGROUP",s.size),i.setValue("AS_SORT",s.searchSort),i.setValue("AS_OPRFLAG","1"),i.setValue("AN_PAGESIZE","20"),i.setValue("AN_PAGENO",s.pageno);var l=new D.InvokeProc;l.addBusiness(t),console.log(a()(l)),l.invoke(function(t){if("Y"==t.iswholeSuccess||"Y"==t.isAllBussSuccess){var i=e.getResult(t,"AC_RESULT").rows;console.log(i),0==i.length&&1==s.pageno?s.hasRes=!1:s.hasRes=!0,s.list=s.list.concat(i),s.$store.commit("upList","page1",i),s.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.finishLoad"),i.length<20&&s.pageno>1&&s.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.loadedDone")}else console.log(t.errorMessage),s.ydui.alert({mes:t.errorMessage})})},loadList:function(){var s=this;console.error("执行了下拉刷新获取数据"),this.pageno=1,this.list=[],this.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.reInit"),this.getList(),setTimeout(function(){s.$refs.pullrefreshDemo.$emit("ydui.pullrefresh.finishLoad")},1e3)},loadLists:function(){console.log("滚动加载了"),this.pageno++,this.getList()},goDetail:function(s,t,e,i,o,a){this.$router.push({path:"/addDtl",query:l()({id:s,footId:"1",orderno:t,dycsjscsj:e||"",jcsj:i||"",percentage:o||"0",zhsjscsj:a||""},"footId",0)})}}},n={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"yd-flexview"},[e("div",{staticClass:"g-scrollview"},[e("addHeader",{on:{onFirstGet:s.firstGet_color}}),s._v(" "),e("addSearch",{attrs:{idx:2},on:{onFirstGetSort:s.firstGet_sort,onFirstGetSearch:s.firstGet_search,onFirstGet:s.firstGet_size}}),s._v(" "),s._m(0),s._v(" "),e("div",{staticClass:"m-main os",staticStyle:{height:"-webkit-calc(100% - 176px)",top:"125px"}},[e("yd-pullrefresh",{ref:"pullrefreshDemo",attrs:{callback:s.loadList}},[e("yd-infinitescroll",{ref:"infinitescrollDemo",attrs:{callback:s.loadLists}},s._l(s.list,function(t,i){return e("yd-list",{key:i,attrs:{slot:"list",theme:"4"},slot:"list"},[s.hasRes?e("ul",{staticClass:"m-tab-dtl",attrs:{"data-id":t.id,"data-orderno":t.orderno,"data-dycsjscsj":t.dycsjscsj,"data-jcsj":t.jcsj,"data-percentage":t.percentage,"data-zhsjscsj":t.zhsjscsj},on:{click:function(e){s.goDetail(t.id,t.orderno,t.dycsjscsj,t.jcsj,t.percentage,t.zhsjscsj)}}},[e("li",{staticClass:"selflex adda"},[s._v(s._s(t.orderno))]),s._v(" "),e("li",{staticClass:"selflex adda",staticStyle:{color:"#3297fd"}},[e("u",[s._v(s._s(t.num_sumqry))])]),s._v(" "),e("li",{staticClass:"selflex adda"},[s._v(s._s(t.percentage))]),s._v(" "),e("li",{staticClass:"selflex adda"},[s._v(s._s(t.takeorderdate))]),s._v(" "),e("li",{staticClass:"selflex adda"},[s._v(s._s(t.jcsj))])]):s._e()])}))],1),s._v(" "),s.hasRes?s._e():e("pageError",{attrs:{msg:s.pageError}})],1)],1),s._v(" "),e("addFooter",{attrs:{idx:0}})],1)},staticRenderFns:[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ul",{staticClass:"m-tab",staticStyle:{top:"88px"}},[e("li",[s._v("主订单号")]),s._v(" "),e("li",[s._v("总定量")]),s._v(" "),e("li",{staticStyle:{width:"50px"}},[s._v("百分比")]),s._v(" "),e("li",[s._v("接单时间")]),s._v(" "),e("li",[s._v("进仓时间")])])}]},c=e("VU/8")(r,n,!1,null,null,null);t.default=c.exports}});